<!DOCTYPE html>
<html lang="zh" data-theme=""><head>
    <title> Amao Three | Arch Linux 下两种推荐的bootloader（下）：rEFInd </title>

    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.81.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="天下有大勇者，卒然临之而不惊，无故加之而不怒；此其所挟持者甚大，而其志甚远也。--苏轼">
    
    <link rel="stylesheet"
          href="https://amao.run/css/style.min.0c643de4008adca329f7a2d616ce308cca99d4ef45e4cca307323e7857910194.css"
          integrity="sha256-DGQ95ACK3KMp96LWFs4wjMqZ1O9F5MyjBzI&#43;eFeRAZQ="
          crossorigin="anonymous"
          type="text/css">
    
    <link rel="stylesheet"
        href="https://amao.run/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css"
        integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS&#43;yuWSR4="
        crossorigin="anonymous"
        type="text/css">
    
    <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />

    
    <link rel="shortcut icon" href="https://amao.run/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://amao.run/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://amao.run/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://amao.run/favicons/favicon-16x16.png">

    <link rel="canonical" href="https://amao.run/posts/arch-linux-%E4%B8%8B%E4%B8%A4%E7%A7%8D%E6%8E%A8%E8%8D%90%E7%9A%84bootloader%E4%B8%8Brefind/">

    
    
    
    
    <script type="text/javascript"
            src="https://amao.run/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js"
            integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ="
            crossorigin="anonymous"></script>


    
        
        
        <script type="text/javascript"
                src="https://amao.run/js/anatole-theme-switcher.min.8ef71e0fd43f21a303733dbbecae5438b791d2b826c68a9883bd7aa459a076d2.js"
                integrity="sha256-jvceD9Q/IaMDcz277K5UOLeR0rgmxoqYg716pFmgdtI="
                crossorigin="anonymous"></script>
    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Arch Linux 下两种推荐的bootloader（下）：rEFInd"/>
<meta name="twitter:description" content="上一篇介绍了如何安装systemd-boot，这一篇给大家介绍另个非热门的热门bootloader，也更好看的refind。


rEFInd is a UEFI boot manager capable of launching EFISTUB kernels. It is a fork of the no-longer-maintained rEFIt and fixes many issues with respect to non-Mac UEFI booting. It is designed to be platform-neutral and to simplify booting multiple OSes.

refind给我的感觉就是不仅好看而且更实用，配置起来章法可依，参数详细，定制化更简单。好看的主题虽然数量应该不及GRUB多，但是质量均为不俗。
最重要的是即使不做配置，它的全盘搜索efi可以检测到你所有的硬盘上拥有的安装的所有启动项！非常强大，非常方便，可以直接开箱即用！
正因如此，它开机会慢一丢丢，但是因为直接读取了UEFI，所以也不会像是搜索文件那么夸张。仅仅是慢一丢丢。"/>


    
    <meta property="og:title" content="Arch Linux 下两种推荐的bootloader（下）：rEFInd" />
<meta property="og:description" content="上一篇介绍了如何安装systemd-boot，这一篇给大家介绍另个非热门的热门bootloader，也更好看的refind。


rEFInd is a UEFI boot manager capable of launching EFISTUB kernels. It is a fork of the no-longer-maintained rEFIt and fixes many issues with respect to non-Mac UEFI booting. It is designed to be platform-neutral and to simplify booting multiple OSes.

refind给我的感觉就是不仅好看而且更实用，配置起来章法可依，参数详细，定制化更简单。好看的主题虽然数量应该不及GRUB多，但是质量均为不俗。
最重要的是即使不做配置，它的全盘搜索efi可以检测到你所有的硬盘上拥有的安装的所有启动项！非常强大，非常方便，可以直接开箱即用！
正因如此，它开机会慢一丢丢，但是因为直接读取了UEFI，所以也不会像是搜索文件那么夸张。仅仅是慢一丢丢。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://amao.run/posts/arch-linux-%E4%B8%8B%E4%B8%A4%E7%A7%8D%E6%8E%A8%E8%8D%90%E7%9A%84bootloader%E4%B8%8Brefind/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-24T19:39:53&#43;00:00" />
<meta property="article:modified_time" content="2019-03-24T19:39:53&#43;00:00" /><meta property="og:site_name" content="阿毛的随便写写" />


</head>
<body><div class="sidebar animated fadeInDown ">
    <div class="logo-title">
        <div class="title">
            <img src="https://amao.run/images/profile.jpg" alt="profile picture">
            <h3 title=""><a href="/">阿毛的随便写写</a></h3>
            <div class="description">
                <p>天下有大勇者，卒然临之而不惊，无故加之而不怒；此其所挟持者甚大，而其志甚远也。--苏轼</p>
            </div>
        </div>
    </div>
    <ul class="social-links">
        
            <li>
                <a href="https://www.linkedin.com/in/yuehao-sui/" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://github.com/amaothree" rel="me" aria-label="GitHub">
                    <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://www.instagram.com/yoohoo.samuel/" rel="me" aria-label="instagram">
                    <i class="fab fa-instagram fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="mailto:ihidemyname@outlook.com" rel="me" aria-label="e-mail">
                    <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Amao Three  2019-2021 </div>
    </div>
</div>
<div class="main">
    <div class="page-top  animated fadeInDown ">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a 
                   href="/zh/"
                        
                   title="">主页</a></li>
        
            
            <li><a 
                   href="/zh/posts/"
                        
                   title="">文章</a></li>
        
            
            <li><a 
                   href="/zh/about/"
                        
                   title="">关于我</a></li>
        
        
            
                <li><a href="https://amao.run/"
                       title="中文">中文</a>
                </li>
            
                <li><a href="https://amao.run/en/"
                       title="EN">EN</a>
                </li>
            
        
        
            <li class="theme-switch-item">
                <a class="theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
</div>

    <div class="autopagerize_page_element">
        <div class="content">
    <div class="post  animated fadeInDown ">
        <div class="post-content">
            
            <div class="post-title">
                <h3>Arch Linux 下两种推荐的bootloader（下）：rEFInd</h3>
                
            </div>

            <p><a href="https://amaois.wang/2019/03/24/Arch-Linux-%E4%B8%8B%E4%B8%A4%E7%A7%8D%E6%8E%A8%E8%8D%90%E7%9A%84bootloader%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9Asystemd-boot/">上一篇</a>介绍了如何安装systemd-boot，这一篇给大家介绍另个非热门的热门bootloader，也更好看的refind。</p>
<p><img src="https://camo.githubusercontent.com/999cff82d4bea54f222e165d647b5df597f45b86/687474703a2f2f692e696d6775722e636f6d2f33624d473655372e706e67" alt=""></p>
<blockquote>
<p>rEFInd is a UEFI boot manager capable of launching EFISTUB kernels. It is a fork of the no-longer-maintained rEFIt and fixes many issues with respect to non-Mac UEFI booting. It is designed to be platform-neutral and to simplify booting multiple OSes.</p>
</blockquote>
<p>refind给我的感觉就是不仅好看而且更实用，配置起来章法可依，参数详细，定制化更简单。好看的主题虽然数量应该不及GRUB多，但是质量均为不俗。</p>
<p>最重要的是即使不做配置，它的全盘搜索efi可以检测到你所有的硬盘上拥有的安装的所有启动项！非常强大，非常方便，可以直接开箱即用！</p>
<p>正因如此，它开机会慢一丢丢，但是因为直接读取了UEFI，所以也不会像是搜索文件那么夸张。仅仅是慢一丢丢。</p>
<hr>
<h2 id="哇那我要怎么安装呢">哇！那我要怎么安装呢？</h2>
<ol>
<li>安装refind包</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo pacman -S refind-efi
</code></pre></div><ol start="2">
<li>执行安装脚本</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">refind-install
</code></pre></div><ol start="3">
<li>
<p>archlinux下会默认生成两个配置文件，一个是/boot/refind_linux.conf，另一个/boot/EFI/refind/refind.conf，本篇教程只针对后者，前者删除即可。当然这里不是说前者无用，具体差距请看<a href="https://wiki.archlinux.org/index.php/REFInd#Passing_kernel_parameters">wiki</a></p>
</li>
<li>
<p>这里不推荐直接在refind.conf上修改，最好新建一个对照的有所依的添加功能。</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cd /boot/EFI/refind/
sudo mv ./refind.conf ./refind.conf.backup
sudo nano ./refind.conf
</code></pre></div><ol start="5">
<li>还是要看一下根分区的partuuid</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ls -l /dev/disk/by-partuuid/
</code></pre></div><ol start="6">
<li>编辑config文件</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo nano ./refind.conf
</code></pre></div><p>配置文件内容如下：</p>
<pre><code class="language-conf" data-lang="conf">timeout 4

resolution 1920 1080

dont_scan_files vmlinuz-linux,systemd-bootx64.efi

default_selection &quot;Arch Linux&quot;

menuentry &quot;Arch Linux&quot; {
    icon     /EFI/refind/icons/os_arch.png
    volume   &quot;Arch Linux&quot;
    loader   /vmlinuz-linux
    initrd   /initramfs-linux.img
    options  &quot;rw root=PARTUUID=3b877628-b582-3749-b36b-b999b39f315c radeon.si_support=0 amdgpu.si_support amdgpu.dc=1 initrd=/intel-ucode.img&quot;
    submenuentry &quot;Boot using fallback initramfs&quot; {
        initrd /initramfs-linux-fallback.img
    }
    submenuentry &quot;Boot to terminal&quot; {
        add_options &quot;systemd.unit=multi-user.target&quot;
    }
    submenuentry &quot;Boot to single user mode&quot; {
                add_options &quot;single&quot;
    }
}
</code></pre><p>这里对配置文件做个说明：</p>
<ol>
<li>第一行是timeuot，不多说了</li>
<li>第二行是分辨率</li>
<li>第三行是你不希望refind扫出来哪几个启动项，因为我们下面手写了一个archlinux的entry，因此如果不禁止它去扫，开机菜单就会出来重复的启动项！难看！于是我这里就禁止了linux和之前建立的systemd-boot（这个也会被扫出来哦）。这个参数有很多用法，具体看之前生成的他的config文件，很详细。</li>
<li>第四行，默认启动项。</li>
<li>第五行以下，entry的详细配置，重点是第一个闭包，这里和其他的bootloader写法大同小异，ucode的调用要写到options里，我这个例子还有一些我用到的内核参数，都是统统写到这里。根分区的partuuid别忘了写！</li>
</ol>
<p>具体entry如何写，其他os的写法，可以参照wiki里的，也可以直接看原来的config里，里面还有其他的很多设置参数。我这里用不上，大家依需自取。</p>
<hr>
<h2 id="如何美化">如何美化</h2>
<p>你重启后就会发现，默认主题实在是丑爆了！</p>
<p>github上有非常好看的主题，这里举例推荐<a href="https://evanpurkhiser.com/rEFInd-minimal/">rEFInd Minimal</a>,我们来安装它。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">1. cd /boot/EFI/refind/
2. mkdir ./themes
3. cd ./themes
4. git clone https://github.com/EvanPurkhiser/rEFInd-minimal.git
5. cd ../
6. nano ./refind.conf
</code></pre></div><p>这里修改两个地方，一个是修改原来arch的entry配置里的icon位置，另一个是在conf末尾加入include。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">timeout <span style="color:#ae81ff">4</span>

…………………………
    icon /EFI/refind/themes/rEFInd-minimal/icons/os_arch.png
…………………………

include themes/rEFInd-minimal/theme.conf
<span style="color:#75715e">#EOF</span>
</code></pre></div><p>好了，保存后重启看看！！</p></div>
        <div class="post-footer">
            <div class="info">
                
                <span class="separator"><a class="tag" href="/tags/arch/">Arch</a><a class="tag" href="/tags/efi/">EFI</a><a class="tag" href="/tags/geek/">Geek</a></span>

            </div>
        </div>

        
    </div>


        </div>
    </div>
</div>

<script type="text/javascript"
        src="https://amao.run/js/jquery.min.72e5cdc7ae76325aa57a51c185e2b93c1b216e69c1a4fec5e53a9035977f931e.js"
        integrity="sha256-cuXNx652MlqlelHBheK5PBshbmnBpP7F5TqQNZd/kx4="
        crossorigin="anonymous"></script>




<script type="text/javascript"
        src="https://amao.run/js/bundle.min.c8b242abc1fe7aff347bfd713f638199bc03c20706de4041bd4c06133f49d0a0.js"
        integrity="sha256-yLJCq8H&#43;ev80e/1xP2OBmbwDwgcG3kBBvUwGEz9J0KA="
        crossorigin="anonymous"></script>

<script type="text/javascript"
        src="https://amao.run/js/medium-zoom.min.2d6fd0be87fa98f0c9b4dc2536b312bbca48757f584f6ea1f394abc9bcc38fbc.js"
        integrity="sha256-LW/Qvof6mPDJtNwlNrMSu8pIdX9YT26h85SrybzDj7w="
        crossorigin="anonymous"></script>
</body>

</html>
