<!doctype html><html lang=zh data-theme><head><title>Amao Three | Arch Linux 下两种推荐的bootloader（上）：systemd-boot</title><meta charset=utf-8><meta name=generator content="Hugo 0.81.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="天下有大勇者，卒然临之而不惊，无故加之而不怒；此其所挟持者甚大，而其志甚远也。--苏轼"><link rel=stylesheet href=https://amao.run/css/style.min.0c643de4008adca329f7a2d616ce308cca99d4ef45e4cca307323e7857910194.css integrity="sha256-DGQ95ACK3KMp96LWFs4wjMqZ1O9F5MyjBzI+eFeRAZQ=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://amao.run/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=https://amao.run/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=https://amao.run/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://amao.run/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://amao.run/favicons/favicon-16x16.png><link rel=canonical href=https://amao.run/posts/arch-linux-%E4%B8%8B%E4%B8%A4%E7%A7%8D%E6%8E%A8%E8%8D%90%E7%9A%84bootloader%E4%B8%8Asystemd-boot/><script type=text/javascript src=https://amao.run/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ=" crossorigin=anonymous></script><script type=text/javascript src=https://amao.run/js/anatole-theme-switcher.min.8ef71e0fd43f21a303733dbbecae5438b791d2b826c68a9883bd7aa459a076d2.js integrity="sha256-jvceD9Q/IaMDcz277K5UOLeR0rgmxoqYg716pFmgdtI=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Arch Linux 下两种推荐的bootloader（上）：systemd-boot"><meta name=twitter:description content="维持一个博客还是蛮难的，并不是说服务器的维护，而是说更新博文。
周更的Flag很快就倒了，一是说这一段时间学校的B事实在是太多，自己也不太争气。二是说，自己也不知道要写一些什么好，我还是太弱了，什么都不精通，了解的也少。
不过最近正好安装了rEFInd用来替代之前一直用的systemd-boot，就一并介绍了。
先说说为什么不说更常用的GRUB，首先是之前一大段时间一直是archlinux单系统的，没有必要用bootloader，所以GRUB这种较为“庞大”的我就放弃掉了。其次是本人一直以来非主流思想较为严重，对待主流事物一直有不健康的偏见思想……所以就更爱用一些“非主流”的东西。当然这里是相对的。实际上今天介绍的两个Bootloader还是很流行的。"></head><body><div class="sidebar animated fadeInDown"><div class=logo-title><div class=title><img src=https://amao.run/images/profile.jpg alt="profile picture"><h3 title><a href=/>阿毛的随便写写</a></h3><div class=description><p>天下有大勇者，卒然临之而不惊，无故加之而不怒；此其所挟持者甚大，而其志甚远也。--苏轼</p></div></div></div><ul class=social-links><li><a href=https://www.linkedin.com/in/yuehao-sui/ rel=me aria-label=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li><a href=https://github.com/amaothree rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=https://www.instagram.com/yoohoo.samuel/ rel=me aria-label=instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li><li><a href=mailto:ihidemyname@outlook.com rel=me aria-label=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul><div class=footer><div class=by_farbox>&copy; Amao Three 2019-2021</div></div></div><div class=main><div class="page-top animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><ul class=nav id=navMenu><li><a href=/zh/ title>主页</a></li><li><a href=/zh/posts/ title>文章</a></li><li><a href=/zh/about/ title>关于我</a></li><li><a href=https://amao.run/ title=中文>中文</a></li><li><a href=https://amao.run/en/ title=EN>EN</a></li><li class=theme-switch-item><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></div><div class=autopagerize_page_element><div class=content><div class="post animated fadeInDown"><div class=post-content><div class=post-title><h3>Arch Linux 下两种推荐的bootloader（上）：systemd-boot</h3></div><p>维持一个博客还是蛮难的，并不是说服务器的维护，而是说更新博文。</p><p>周更的Flag很快就倒了，一是说这一段时间学校的B事实在是太多，自己也不太争气。二是说，自己也不知道要写一些什么好，我还是太弱了，什么都不精通，了解的也少。</p><p>不过最近正好安装了rEFInd用来替代之前一直用的systemd-boot，就一并介绍了。</p><p>先说说为什么不说更常用的GRUB，首先是之前一大段时间一直是archlinux单系统的，没有必要用bootloader，所以GRUB这种较为“庞大”的我就放弃掉了。其次是本人一直以来非主流思想较为严重，对待主流事物一直有不健康的偏见思想……所以就更爱用一些“非主流”的东西。当然这里是相对的。实际上今天介绍的两个Bootloader还是很流行的。</p><h2 id=先说说systemd-boot>先说说systemd-boot：</h2><blockquote><p><strong>systemd-boot</strong>, previously called gummiboot (German for: &lsquo;rubber dinghy&rsquo;), is a simple UEFI boot manager which executes configured EFI images. The default entry is selected by a configured pattern (glob) or an on-screen menu to be navigated via arrow-keys. It is included with systemd, which is installed on an Arch system by default.<br>It is simple to configure but it can only start EFI executables such as the Linux kernel EFISTUB, UEFI Shell, GRUB, or the Windows Boot Manager. （FROM Arch Wiki）</p></blockquote><p>systemd-boot给我的最直观感受是，它应该是最符合极客标准的bootloader。结合自身使用经历后，总结一下几个特点：</p><ul><li>极度简洁，没有任何花里胡哨的东西，纯CLI启动。</li><li>配置及其简单，配置config文件只需要三行。</li><li>启动迅速，没有卡顿感。</li></ul><p>配合SSD，从按下开机键开始计时，进入DM不到10s（当然我是因为把菜单等待时间设为1s了）。</p><hr><h2 id=下面来说说咋安装>下面来说说咋安装。</h2><p><strong>（教程中默认ESP挂载点是在/boot,请大家注意结合自身情况修改相应部分）</strong></p><ol><li><p>首先这个模块是归在systemd里的，所以不需要安装任何其他的包的。</p></li><li><p>执行安装脚本：</p></li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo bootctl --path<span style=color:#f92672>=</span>/boot install
</code></pre></div><ol start=3><li>编辑配置文件</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo nano /boot/loader/loader.conf
</code></pre></div><pre><code class=language-config data-lang=config>timeout 1       #菜单超时时长，单位为秒
default arch    #默认的entry文件名（下一步介绍）
</code></pre><p>是的，没有看错，这个文件两行就可以了。</p><ol start=4><li>编辑entry文件</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo nano /boot/loader/entries/arch.conf 
</code></pre></div><p>文件名啥都行，但是得注意的是，默认的entry的文件名修改后，也要修改loader.conf对应的部分。</p><pre><code class=language-config data-lang=config>title   Amao Linux  #启动菜单内显示的改启动项的标题
linux   /vmlinuz-linux
initrd  /intel-ucode.img    #amd cpu的修改为amd-ucode
initrd  /initramfs-linux.img
options root=PARTUUID=3b877628-b582-3749-b36b-b999b39f315c rw

# 根分区的partuuid可以通过下面这一行命令查看
# ls -l /dev/disk/by-partuuid
</code></pre><ol start=5><li><p>完成了！是不是超简单！不过正因为是CLI，所以没有办法美化，但说不定通过写entries的标题可以搞出来字符画（大雾</p></li><li><p>进UEFI修改boot启动顺序就好了</p></li></ol><p>下一篇介绍另一个，rEFInd</p></div><div class=post-footer><div class=info><span class=separator><a class=tag href=/tags/arch/>Arch</a><a class=tag href=/tags/efi/>EFI</a><a class=tag href=/tags/geek/>Geek</a></span></div></div></div></div></div></div><script type=text/javascript src=https://amao.run/js/jquery.min.64d0083866906099f942140bc1c5cba4b1bf65783c52e4a63c5c46bf9dbc41f4.js integrity="sha256-ZNAIOGaQYJn5QhQLwcXLpLG/ZXg8UuSmPFxGv528QfQ=" crossorigin=anonymous></script><script type=text/javascript src=https://amao.run/js/bundle.min.45159b0e20ba3878972e064b7edc464c31a9e35a0d0a6a71e3fec84efdbe2ea5.js integrity="sha256-RRWbDiC6OHiXLgZLftxGTDGp41oNCmpx4/7ITv2+LqU=" crossorigin=anonymous></script><script type=text/javascript src=https://amao.run/js/medium-zoom.min.2d6fd0be87fa98f0c9b4dc2536b312bbca48757f584f6ea1f394abc9bcc38fbc.js integrity="sha256-LW/Qvof6mPDJtNwlNrMSu8pIdX9YT26h85SrybzDj7w=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4GTD2DHRN1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-4GTD2DHRN1')</script></body></html>